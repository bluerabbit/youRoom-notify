<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
  <title>Config</title>
  <link rel="stylesheet" href="css/screen.css" type="text/css" media="screen" title="default"/>
  <script src="js/jquery/jquery-1.4.1.min.js" type="text/javascript"></script>
  <script src="js/jquery/jquery.bind.js" type="text/javascript"></script>
  <script src="js/jquery/jquery.selectbox-0.5_style_2.js" type="text/javascript"></script>
  <script src="js/jquery/custom_jquery.js" type="text/javascript"></script>
  <script type="text/javascript" src="/js/manifest.js"></script>
  <script type="text/javascript" src="js/jquery-lightbox/js/jquery.lightbox-0.5.js"></script>
  <link rel="stylesheet" type="text/css" href="js/jquery-lightbox/css/jquery.lightbox-0.5.css" media="screen"/>
  <style type="text/css">
    .keywordDelete {
      width: 65px;
      height: 30px;
    }

    .liKeyword {
      margin-bottom: 5px;
    }
  </style>

  <script type="text/javascript">
    var BG = chrome.extension.getBackgroundPage();
    var options = BG.options;
    $(function () {
      var manifest = Manifest.load();
      $('.appname').text(manifest.name);

      var host = 'chrome-extension://' + location.host + '/html/options/';
      $("#news").attr("href", host + 'news.html');
      $("#about").attr("href", host + 'about.html');
      $('#configImage').lightBox();
      $('#consumer_key').val(options.consumer_key).change(save);
      $('#consumer_secret').val(options.consumer_secret).change(save);
      enabledAuthButton();
      $('#auth').click(function () {
        options.reset_oauth();
        save();
        chrome.extension.sendRequest({id:'auth'});
      });
    });

    function enabledAuthButton() {
      if (BG.youroom) {
        $('#auth').attr('disabled', 'disabled');
        $('#consumer_key').attr('disabled', 'disabled');
        $('#consumer_secret').attr('disabled', 'disabled');
      } else if ($('#consumer_key').val().length == 0 || $('#consumer_secret').val().length == 0) {
        $('#auth').attr('disabled', 'disabled');
      } else {
        $('#auth').attr('disabled', '');
      }
    }

    function save() {
      enabledAuthButton();
      options.consumer_key = $('#consumer_key').val();
      options.consumer_secret = $('#consumer_secret').val();
      options.save();
      setTimeout(function () {
        BG.timer.restart();
      }, 5000);
    }
  </script>
</head>
<body>
<div id="page-top-outer">
  <div id="page-top">
    <div id="logo">
      <a href=""><!--<img src="images/shared/logo.png" width="156" height="40" alt="" />--></a>
    </div>
  </div>
</div>
<div class="clear">&nbsp;</div>

<!--  start nav-outer-repeat................................................. START -->
<div class="nav-outer-repeat">
  <!--  start nav-outer -->
  <div class="nav-outer">
    <div class="nav">
      <div class="table">
        <ul class="current">
          <li><a href="#nogo"><b>Config</b></a></li>
        </ul>
        <div class="nav-divider">&nbsp;</div>
        <ul class="select">
          <li><a id="news" href="#nogo"><b>News</b></a></li>
        </ul>
        <div class="nav-divider">&nbsp;</div>
        <ul class="select">
          <li><a id="about" href="#nogo"><b>About</b></a></li>
        </ul>
        <div class="nav-divider">&nbsp;</div>
        <div class="clear"></div>
      </div>
      <div class="clear"></div>
    </div>
  </div>
  <div class="clear"></div>
  <!--  start nav-outer -->
</div>
<!--  start nav-outer-repeat................................................... END -->

<div class="clear"></div>

<!-- start content-outer -->
<div id="content-outer">
  <!-- start content -->
  <div id="content">

    <div id="page-heading"><h1><span class="appname"></span>の設定</h1></div>

    <table border="0" width="100%" cellpadding="0" cellspacing="0" id="content-table">
      <tr>
        <th rowspan="3" class="sized"><img src="images/shared/side_shadowleft.jpg" width="20" height="300" alt=""/></th>
        <th class="topleft"></th>
        <td id="tbl-border-top">&nbsp;</td>
        <th class="topright"></th>
        <th rowspan="3" class="sized"><img src="images/shared/side_shadowright.jpg" width="20" height="300" alt=""/>
        </th>
      </tr>
      <tr>
        <td id="tbl-border-left" style="height:300px;"></td>
        <td>
          <!--  start content-table-inner -->
          <div id="content-table-inner">

            <table border="0" width="100%" cellpadding="0" cellspacing="0">
              <tr valign="top">
                <td>
                  <!-- start id-form -->
                  <table border="0" cellpadding="0" cellspacing="0" id="id-form">
                    <tr>
                      <th valign="top">consumer_key:</th>
                      <td><input type="text" id="consumer_key" class="inp-form"/></td>
                    </tr>
                    <tr>
                      <th valign="top">consumer_secret:</th>
                      <td><input type="text" id="consumer_secret" class="inp-form"
                                 style="width:277px;-webkit-background-size: 290px 30px"/></td>
                    </tr>
                    <tr>
                      <td colspan="2" align="center"><input id="auth" type="button" disabled="disabled" value="認証する">
                      </td>
                    </tr>
                  </table>
                  <!-- end id-form  -->
                </td>
                <td>
                  <!--  start related-activities -->
                  <div id="related-activities">
                    <div id="related-act-top">
                      <img src="images/forms/config_about.gif" width="271" height="43" alt=""/>
                    </div>
                    <div id="related-act-bottom">
                      <div id="related-act-inner">
                        <div class="left"><a href=""><img src="images/forms/icon_plus.gif" width="21" height="21"
                                                          alt=""/></a></div>
                        <div class="right">
                          <h5>自動保存</h5>
                          設定内容は変更すると保存されます。
                        </div>
                        <div class="clear"></div>
                        <div class="lines-dotted-short"></div>
                        <div class="left"><a href=""><img src="images/forms/icon_plus.gif" width="21" height="21"
                                                          alt=""/></a></div>
                        <div class="right">
                          <h5>認証</h5>
                          consumer_keyとconsumer_secretがわからない場合は下記からキーを申請してください。
                          <a href="http://goo.gl/g84BQ" target="_blank">http://goo.gl/g84BQ</a>
                        </div>
                        <div class="clear"></div>
                      </div>
                      <div class="clear"></div>
                    </div>
                  </div>
                  <!-- end related-activities -->
                </td>
              </tr>
              <tr>
                <td><img src="images/shared/blank.gif" width="695" height="1" alt="blank"/></td>
                <td></td>
              </tr>
            </table>

            <div class="clear"></div>
          </div>
          <!--  end content-table-inner  -->
        </td>
        <td id="tbl-border-right"></td>
      </tr>
      <tr>
        <th class="sized bottomleft"></th>
        <td id="tbl-border-bottom">&nbsp;</td>
        <th class="sized bottomright"></th>
      </tr>
    </table>

    <div class="clear">&nbsp;</div>
  </div>
  <!--  end content -->
  <div class="clear">&nbsp;</div>
</div>
<!--  end content-outer -->
<div class="clear">&nbsp;</div>
<div id="footer">
  <div id="footer-left"><span class="appname"></span> &copy; Copyright <a href="http://twitter.com/bluerabbit777jp"
                                                                          target="_blank">@bluerabbit777jp</a>. All
    rights reserved.
  </div>
  <div class="clear">&nbsp;</div>
</div>
</body>
</html>